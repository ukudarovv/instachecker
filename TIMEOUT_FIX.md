# ‚è±Ô∏è Timeout Fix

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª: "–ü–æ—á–µ–º—É –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏–ª–æ—Å—å —Ñ–æ—Ç–æ"

–í –ª–æ–≥–∞—Ö –±—ã–ª–æ –≤–∏–¥–Ω–æ:
```
PROXY-HEADER-SCREENSHOT] ‚è±Ô∏è Timeout: Page.goto: Timeout 30000ms exceeded.
Call log:
navigating to "https://www.instagram.com/ukudarov/", waiting until "domcontentloaded"
```

–°—Ç—Ä–∞–Ω–∏—Ü–∞ Instagram –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª–∞—Å—å –≤ —Ç–µ—á–µ–Ω–∏–µ 30 —Å–µ–∫—É–Ω–¥, –ø–æ—ç—Ç–æ–º—É —Å–∫—Ä–∏–Ω—à–æ—Ç –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –∏ —Ñ–æ—Ç–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–æ—Å—å.

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. `project/services/main_checker.py`

#### ‚ùå –ë—ã–ª–æ (30 —Å–µ–∫—É–Ω–¥ timeout):
```python
timeout_ms=30000,  # 30 —Å–µ–∫—É–Ω–¥
```

#### ‚úÖ –°—Ç–∞–ª–æ (60 —Å–µ–∫—É–Ω–¥ timeout):
```python
timeout_ms=60000,  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º timeout –¥–æ 60 —Å–µ–∫—É–Ω–¥
```

### 2. `project/services/ig_screenshot.py`

#### –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ timeout –æ—à–∏–±–æ–∫:

```python
try:
    response = await page.goto(url, wait_until="domcontentloaded", timeout=timeout_ms)
    status_code = response.status if response else None
    print(f"[PROXY-HEADER-SCREENSHOT] üìä HTTP Status: {status_code}")
except PWTimeoutError as e:
    print(f"[PROXY-HEADER-SCREENSHOT] ‚è±Ô∏è Timeout –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã: {e}")
    result["error"] = f"timeout_loading_page: {str(e)}"
    result["exists"] = False
    await browser.close()
    return result
```

#### –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞:

```python
try:
    await page.screenshot(path=screenshot_path, full_page=True)
    print(f"[PROXY-FULL-SCREENSHOT] ‚úÖ –°–∫—Ä–∏–Ω—à–æ—Ç —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ")
except Exception as e:
    print(f"[PROXY-FULL-SCREENSHOT] ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞: {e}")
    result["error"] = f"screenshot_failed: {str(e)}"
    result["exists"] = False
    await browser.close()
    return result
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Timeout –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

**–†–∞–Ω—å—à–µ:**
- `timeout_ms=30000` - 30 —Å–µ–∫—É–Ω–¥
- –ß–∞—Å—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–ª–æ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ Instagram
- –†–µ–∑—É–ª—å—Ç–∞—Ç: timeout –æ—à–∏–±–∫–∏

**–¢–µ–ø–µ—Ä—å:**
- `timeout_ms=60000` - 60 —Å–µ–∫—É–Ω–¥
- –ë–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
- –†–µ–∑—É–ª—å—Ç–∞—Ç: —É—Å–ø–µ—à–Ω—ã–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:

**Timeout –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ:**
```python
except PWTimeoutError as e:
    result["error"] = f"timeout_loading_page: {str(e)}"
    result["exists"] = False
    return result
```

**–û—à–∏–±–∫–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞:**
```python
except Exception as e:
    result["error"] = f"screenshot_failed: {str(e)}"
    result["exists"] = False
    return result
```

### Playwright –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```python
# –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π timeout
timeout_ms=60000

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
try:
    await page.goto(url, wait_until="domcontentloaded", timeout=timeout_ms)
except PWTimeoutError as e:
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ timeout
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞:

1. **‚è±Ô∏è –ë–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏** - 60 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
2. **üõ°Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ timeout'–æ–≤
3. **üì∏ –ù–∞–¥–µ–∂–Ω—ã–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã** - fallback –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
4. **üîß –õ—É—á—à–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫

### –õ–æ–≥–∏ —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:

```
[PROXY-HEADER-SCREENSHOT] üì° –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞: https://www.instagram.com/username/
[PROXY-HEADER-SCREENSHOT] üìä HTTP Status: 200
[PROXY-HEADER-SCREENSHOT] ‚è≥ –û–∂–∏–¥–∞–µ–º –ø–æ–ª–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã...
[PROXY-FULL-SCREENSHOT] üì∏ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ –≤—Å–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã...
[PROXY-FULL-SCREENSHOT] ‚úÖ –°–∫—Ä–∏–Ω—à–æ—Ç —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ
[PROXY-FULL-SCREENSHOT] üì∏ –ü–æ–ª–Ω—ã–π —Å–∫—Ä–∏–Ω—à–æ—Ç: 1920x1080
[PROXY-FULL-SCREENSHOT] üìè –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 245.3 KB
```

### –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö:

```
[PROXY-HEADER-SCREENSHOT] ‚è±Ô∏è Timeout –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã: Timeout 60000ms exceeded
[PROXY-FULL-SCREENSHOT] ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞: Timeout
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ë–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏** - 60 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ Instagram  
‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ timeout'–æ–≤  
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - fallback –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö  
‚úÖ **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏  
‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** - –º–µ–Ω—å—à–µ —Å–±–æ–µ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ  

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç  
‚úÖ **–ù–æ–≤—ã–µ timeout'—ã** - 60 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏  
‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –Ω–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è  
‚úÖ **Telegram** - –±–æ–ª—å—à–µ —É—Å–ø–µ—à–Ω—ã—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫ —Ñ–æ—Ç–æ  

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### Timeout –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

**30 —Å–µ–∫—É–Ω–¥ (—Å—Ç–∞—Ä–æ–µ):**
- –ß–∞—Å—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–ª–æ –¥–ª—è Instagram
- –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–∫—Å–∏
- –†–µ–∑—É–ª—å—Ç–∞—Ç: timeout –æ—à–∏–±–∫–∏

**60 —Å–µ–∫—É–Ω–¥ (–Ω–æ–≤–æ–µ):**
- –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –º–µ–¥–ª–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–∫—Å–∏
- –†–µ–∑—É–ª—å—Ç–∞—Ç: —É—Å–ø–µ—à–Ω—ã–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:

**Timeout –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ:**
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `exists = False`
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞

**–û—à–∏–±–∫–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞:**
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `exists = False`
- –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å –æ—à–∏–±–∫–æ–π

### Playwright –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

- `wait_until="domcontentloaded"` - –∂–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ DOM
- `timeout=60000` - 60 —Å–µ–∫—É–Ω–¥ timeout
- `full_page=True` - –ø–æ–ª–Ω—ã–π —Å–∫—Ä–∏–Ω—à–æ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞:
- ‚è±Ô∏è **–ñ–¥–µ—Ç –¥–æ–ª—å—à–µ** - 60 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
- üõ°Ô∏è **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ timeout'–æ–≤
- üì∏ **–°–æ–∑–¥–∞–µ—Ç —Å–∫—Ä–∏–Ω—à–æ—Ç—ã** - –¥–∞–∂–µ –ø—Ä–∏ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–∫—Å–∏
- üîß **–õ–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã** - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è:
- –ú–µ–¥–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–∫—Å–∏
- –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- –°–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü Instagram
- –ù–∞–¥–µ–∂–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã
