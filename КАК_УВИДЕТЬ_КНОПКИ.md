# Как увидеть кнопки в уведомлениях

## Проблема

При запуске тестового скрипта появляется ошибка:
```
Telegram API error: Bad Request: chat not found
```

Это означает, что бот не может отправить сообщение пользователю, потому что:
- Пользователь никогда не запускал бота
- Пользователь заблокировал бота
- Чат с ботом был удален

## Решение

### Шаг 1: Запустите бота

1. Откройте **Telegram**
2. Найдите вашего бота по имени или через поиск
3. Нажмите кнопку **START** или отправьте команду `/start`
4. Вы должны увидеть приветственное сообщение

### Шаг 2: Запустите тестовый скрипт

После того как вы запустили бота, выполните:

```bash
python test_send_to_me.py
```

### Шаг 3: Проверьте Telegram

Вернитесь в Telegram и вы увидите уведомление с кнопками:

```
⏰ Напоминание: скоро истечет срок мониторинга

📅 Найдено аккаунтов: 1

💡 Рекомендация: Увеличьте период мониторинга заранее

👇 Нажмите на кнопку с аккаунтом для просмотра информации:

┌──────────────────────────────────┐
│ @vrk.qq (осталось 1 дн.)         │  ← КНОПКА!
├──────────────────────────────────┤
│ 📱 Неактивные аккаунты           │  ← КНОПКА!
└──────────────────────────────────┘
```

### Шаг 4: Нажмите на кнопку

При нажатии на кнопку с аккаунтом вы увидите:

```
👤 Аккаунт
• username: @vrk.qq
• с: 2025-10-15
• период (дней): 30
• до: 2025-10-17
• осталось: 1
• статус: 🕒 На проверке / В работе

┌─────────┬──────────┐
│ ➕ День │ ➖ День │  ← КНОПКИ действий
├─────────┴──────────┤
│    🗑 Удалить       │  ← КНОПКА удаления
├────────────────────┤
│     ⬅ Назад        │  ← КНОПКА назад
└────────────────────┘
```

## Альтернатива: Дождитесь автоматических уведомлений

Уведомления будут автоматически отправляться **каждые 24 часа** всем пользователям, у которых есть аккаунты истекающие в течение 7 дней.

Для этого просто:
1. Запустите бота командой `/start`
2. Дождитесь следующей проверки (происходит каждые 24 часа)

## Как проверить что бот работает

### Способ 1: Проверка через главное меню

1. Откройте бота в Telegram
2. Отправьте `/start`
3. Вы должны увидеть главное меню:

```
Главное меню:

┌─────────────────────┐
│ Добавить аккаунт    │
├─────────────────────┤
│ Активные аккаунты   │
├─────────────────────┤
│ Неактивные аккаунты │
└─────────────────────┘
```

### Способ 2: Проверка уведомлений вручную

Запустите тестовый скрипт:

```bash
# Отправить уведомление вам (админу)
python test_send_to_me.py

# Отправить уведомления всем пользователям
python test_expiry_notification.py
```

## Примеры использования кнопок

### Пример 1: Продление периода

1. Получили уведомление с кнопками
2. Нажали на `@account1 (осталось 3 дн.)`
3. Увидели карточку аккаунта
4. Нажали `➕ День`
5. Ввели: `30`
6. Период продлён на 30 дней! ✅

### Пример 2: Удаление аккаунта

1. Нажали на кнопку с аккаунтом
2. Нажали `🗑 Удалить`
3. Подтвердили удаление
4. Аккаунт удалён! ✅

### Пример 3: Просмотр всех неактивных

1. Нажали `📱 Неактивные аккаунты`
2. Увидели список всех неактивных аккаунтов с пагинацией
3. Можно перелистывать страницы

## Где искать бота в Telegram

### Если вы знаете имя бота:
- Введите имя бота в поиск Telegram
- Имя бота обычно заканчивается на `_bot`

### Если вы знаете только токен:
Токен выглядит так: `7152257574:AAH7LSYV101vMcR5iFKQmQSTJJlH8jg7dow`

Чтобы найти бота:
1. Откройте браузер
2. Перейдите по ссылке: `https://t.me/YOUR_BOT_USERNAME`
3. Или используйте @BotFather в Telegram для поиска ваших ботов

### Через BotFather:
1. Откройте @BotFather в Telegram
2. Отправьте команду `/mybots`
3. Выберите вашего бота из списка
4. Нажмите кнопку, чтобы открыть чат

## Частые вопросы

### Q: Почему я не вижу кнопки?
**A:** Убедитесь что:
- Вы запустили бота командой `/start`
- Бот работает (запущен процесс)
- Вы не заблокировали бота

### Q: Кнопки не работают при нажатии
**A:** Проверьте что:
- Бот запущен и обрабатывает callback-и
- В логах бота нет ошибок
- Попробуйте перезапустить бота

### Q: Когда придут автоматические уведомления?
**A:** Автоматические уведомления отправляются:
- **Каждые 24 часа**
- Только для аккаунтов, у которых осталось **7 дней или меньше**
- После того как вы запустили бота командой `/start`

### Q: Как запустить бота?
**A:** Используйте один из способов:
```bash
python run_bot.py
# или
python start_bot.py
```

## Поддержка

Если кнопки всё ещё не появляются:
1. Проверьте логи бота на ошибки
2. Убедитесь что бот запущен
3. Попробуйте перезапустить бота
4. Проверьте что в базе есть аккаунты с истекающим сроком

## Дата создания

16 октября 2025

