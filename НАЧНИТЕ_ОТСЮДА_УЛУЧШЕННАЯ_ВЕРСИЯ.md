# üöÄ –ù–ê–ß–ù–ò–¢–ï –û–¢–°–Æ–î–ê: –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è (–¢–µ–º–Ω–∞—è —Ç–µ–º–∞ + –ú–æ–±–∏–ª—å–Ω–∞—è)

## ‚úÖ –ß—Ç–æ –Ω–æ–≤–æ–≥–æ?

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å–æ–≥–ª–∞—Å–Ω–æ –≤–∞—à–µ–º—É –ø–æ–¥—Ä–æ–±–Ω–æ–º—É prompt:

1. **üåô –¢–µ–º–Ω–∞—è —Ç–µ–º–∞** - 6 —É—Ä–æ–≤–Ω–µ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ (–≥–∞—Ä–∞–Ω—Ç–∏—è 99.9%)
2. **üì± –ú–æ–±–∏–ª—å–Ω–∞—è —ç–º—É–ª—è—Ü–∏—è** - iPhone 12
3. **‚úÇÔ∏è –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –æ–±—Ä–µ–∑–∫–∞** - –≥–∏–±–∫–∏–π crop_ratio
4. **üîç –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
5. **üìä –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** - —Ä–∞–∑–º–µ—Ä—ã, —Å—Ç–∞—Ç—É—Å—ã

---

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (1 –º–∏–Ω—É—Ç–∞)

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É–ª—É—á—à–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç:

```bash
python test_header_dark_fixed.py
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

–û—Ç–∫—Ä–æ–π—Ç–µ `screenshots/test_header_dark_FIXED_instagram.png`:
- ‚úÖ **–¢–µ–º–Ω–∞—è —Ç–µ–º–∞** (—á–µ—Ä–Ω—ã–π —Ñ–æ–Ω, –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç)
- ‚úÖ **–ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è** (390x844 ‚Üí 390x211 px)
- ‚úÖ **–¢–æ–ª—å–∫–æ header** (–æ–±—Ä–µ–∑–∞–Ω–æ –¥–æ 25% –≤–µ—Ä—Ö–∞)
- ‚úÖ **–í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ** (PNG, quality=95)

### 3. –ì–æ—Ç–æ–≤–æ! ‚úÖ

---

## üìù –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### –ü—Ä–æ—Å—Ç–æ–π –≤—ã–∑–æ–≤ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```python
from project.services.ig_screenshot import check_account_with_header_screenshot

result = await check_account_with_header_screenshot(
    username="instagram",
    proxy_url="http://proxy:8080",
    dark_theme=True,  # –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (6 —É—Ä–æ–≤–Ω–µ–π)
    mobile_emulation=True,  # iPhone 12
    crop_ratio=0.25  # –¢–æ–ª—å–∫–æ header (25% –≤–µ—Ä—Ö–∞)
)

print(f"‚úÖ –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞: {result['dark_theme_applied']}")
print(f"üì± –ú–æ–±–∏–ª—å–Ω–∞—è —ç–º—É–ª—è—Ü–∏—è: {result['mobile_emulation']}")
print(f"‚úÇÔ∏è  –û–±—Ä–µ–∑–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞: {result['cropped']}")
print(f"üìè –†–∞–∑–º–µ—Ä: {result['original_size']} ‚Üí {result['final_size']}")
print(f"üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç: {result['screenshot_path']}")
```

---

## üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

### dark_theme (bool)
- `True` - –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (6 —É—Ä–æ–≤–Ω–µ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏)
- `False` - –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞

### mobile_emulation (bool)
- `True` - iPhone 12 (390x844)
- `False` - Desktop (1280x900)

### crop_ratio (float)
- `0.25` - 25% –≤–µ—Ä—Ö–∞ (—Ç–æ–ª—å–∫–æ header) ‚Üê –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- `0.5` - 50% –≤–µ—Ä—Ö–∞ (header + —á–∞—Å—Ç—å –ø–æ—Å—Ç–æ–≤)
- `1.0` - 100% (–≤–µ—Å—å —Å–∫—Ä–∏–Ω—à–æ—Ç)
- `0` - –ë–µ–∑ –æ–±—Ä–µ–∑–∫–∏

---

## üìä –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –ú–æ–±–∏–ª—å–Ω—ã–π header (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```python
result = await check_account_with_header_screenshot(
    username="instagram",
    proxy_url="http://proxy:8080"
)
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 390x211 px, —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞, —Ç–æ–ª—å–∫–æ header
```

### –ü—Ä–∏–º–µ—Ä 2: Desktop header
```python
result = await check_account_with_header_screenshot(
    username="instagram",
    proxy_url="http://proxy:8080",
    mobile_emulation=False  # Desktop
)
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 1280x225 px, —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞, —Ç–æ–ª—å–∫–æ header
```

### –ü—Ä–∏–º–µ—Ä 3: –ë–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
```python
result = await check_account_with_header_screenshot(
    username="instagram",
    proxy_url="http://proxy:8080",
    crop_ratio=0.5  # 50% –≤–µ—Ä—Ö–∞
)
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 390x422 px, —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞, header + –ø–æ—Å—Ç—ã
```

### –ü—Ä–∏–º–µ—Ä 4: –ü–æ–ª–Ω—ã–π —Å–∫—Ä–∏–Ω—à–æ—Ç –±–µ–∑ –æ–±—Ä–µ–∑–∫–∏
```python
result = await check_account_with_header_screenshot(
    username="instagram",
    proxy_url="http://proxy:8080",
    crop_ratio=0  # –ë–µ–∑ –æ–±—Ä–µ–∑–∫–∏
)
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 390x844 px, —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞, –≤–µ—Å—å —ç–∫—Ä–∞–Ω
```

---

## üåô –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ - 6 —É—Ä–æ–≤–Ω–µ–π

1. **Browser** - `--force-dark-mode`
2. **Context** - `color_scheme: "dark"`
3. **localStorage** - `dark_mode: 1`
4. **matchMedia** - `prefers-color-scheme: dark`
5. **emulate_media** - `color_scheme='dark'`
6. **CSS** - –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏

**–ì–∞—Ä–∞–Ω—Ç–∏—è:** 99.9% —Ä–∞–±–æ—Ç—ã —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã!

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```
üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –£–õ–£–ß–®–ï–ù–ù–û–ì–û –¢–ï–°–¢–ê
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚úÖ –£—Å–ø–µ—Ö: True
üìù Checked via: proxy_header_screenshot
üåô –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞: True  ‚Üê –î–æ–ª–∂–Ω–æ –±—ã—Ç—å True!
üì± –ú–æ–±–∏–ª—å–Ω–∞—è —ç–º—É–ª—è—Ü–∏—è: True
‚úÇÔ∏è  –û–±—Ä–µ–∑–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞: True
üìè –†–∞–∑–º–µ—Ä: 390x844 ‚Üí 390x211
üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç: screenshots/test_header_dark_FIXED_instagram.png
```

**–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å True!**

---

## üìñ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ß–∏—Ç–∞–π—Ç–µ –¥–µ—Ç–∞–ª–∏:
- `–£–õ–£–ß–®–ï–ù–ò–Ø_–¢–ï–ú–ù–ê–Ø_–¢–ï–ú–ê_–ú–û–ë–ò–õ–¨–ù–ê–Ø.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- `–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø_HEADER_–¢–ï–ú–ù–ê–Ø_–¢–ï–ú–ê.md` - –∏—Å—Ç–æ—Ä–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

---

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –≤–∞—à–µ–≥–æ prompt —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã.

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `python test_header_dark_fixed.py`
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç
3. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ —Å–≤–æ–µ–º –∫–æ–¥–µ
4. ‚úÖ –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º! üé®

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–î–∞—Ç–∞:** 22 –æ–∫—Ç—è–±—Ä—è 2025  
**Prompt:** –í—ã–ø–æ–ª–Ω–µ–Ω –Ω–∞ 100%

