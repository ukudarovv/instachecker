# ‚úÖ –ì–û–¢–û–í–û: Header-—Å–∫—Ä–∏–Ω—à–æ—Ç—ã —Å —Ç–µ–º–Ω–æ–π —Ç–µ–º–æ–π

## üéØ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ Instagram –ø—Ä–æ—Ñ–∏–ª–µ–π —á–µ—Ä–µ–∑ **proxy –ë–ï–ó IG —Å–µ—Å—Å–∏–∏** —Å–æ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–º **—Ç–æ–ª—å–∫–æ header'–∞** —Å **—á–µ—Ä–Ω—ã–º —Ñ–æ–Ω–æ–º** (—Ç–µ–º–Ω–∞—è —Ç–µ–º–∞).

## üì∏ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–í–º–µ—Å—Ç–æ:**
- –ü–æ–ª–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å (–≤–µ—Å—å —ç–∫—Ä–∞–Ω)
- –°–≤–µ—Ç–ª—ã–π —Ñ–æ–Ω
- –¢—Ä–µ–±—É–µ—Ç—Å—è IG —Å–µ—Å—Å–∏—è

**–¢–µ–ø–µ—Ä—å:**
- ‚úÖ –¢–æ–ª—å–∫–æ header –ø—Ä–æ—Ñ–∏–ª—è (–≤–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å)
- ‚úÖ –ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω + –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ proxy –ë–ï–ó IG —Å–µ—Å—Å–∏–∏

## üîß –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

1. **`project/services/ig_screenshot.py`**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `check_account_with_header_screenshot()`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ–º–Ω—É—é —Ç–µ–º—É (_apply_dark_theme)
   - –î–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–Ω—à–æ—Ç —Ç–æ–ª—å–∫–æ header'–∞

2. **`project/services/main_checker.py`**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `check_account_with_header_dark_theme()`
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ—Å–Ω–æ–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ø—Ä–æ–≤–µ—Ä–æ–∫

3. **`test_proxy_header_screenshot.py`**
   - –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

```bash
python test_proxy_header_screenshot.py
```

–°–∫—Ä–∏–ø—Ç:
1. –ù–∞–π–¥–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–∫—Å–∏ –≤ –±–∞–∑–µ
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç –ø—Ä–æ—Ñ–∏–ª—å @instagram
3. –°–æ–∑–¥–∞—Å—Ç —Å–∫—Ä–∏–Ω—à–æ—Ç header'–∞ —Å —á–µ—Ä–Ω—ã–º —Ñ–æ–Ω–æ–º
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–µ–º–Ω—ã–π)

## üìù –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –í –∫–æ–¥–µ Python:

```python
from project.services.main_checker import check_account_with_header_dark_theme
from project.database import get_session_factory

session_factory = get_session_factory()

with session_factory() as session:
    success, message, screenshot = await check_account_with_header_dark_theme(
        username="instagram",
        session=session,
        user_id=1
    )
    
    print(f"‚úÖ {message}")
    print(f"üì∏ {screenshot}")
```

### –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:

```python
from project.services.ig_screenshot import check_account_with_header_screenshot

result = await check_account_with_header_screenshot(
    username="instagram",
    proxy_url="http://user:pass@proxy:8080",
    screenshot_path="screenshots/test.png",
    dark_theme=True  # –ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω
)
```

## üé® –¢–µ–º–Ω–∞—è —Ç–µ–º–∞

–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- **–§–æ–Ω:** #000000 (—á–µ—Ä–Ω—ã–π)
- **–¢–µ–∫—Å—Ç:** #ffffff (–±–µ–ª—ã–π)
- **–ö–Ω–æ–ø–∫–∏:** #333333 (—Ç–µ–º–Ω–æ-—Å–µ—Ä—ã–π)

–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑:
1. CSS —Å—Ç–∏–ª–∏ (`add_style_tag`)
2. JavaScript (`page.evaluate`)
3. –î–≤–æ–π–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏

## üìä –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è

‚úÖ HTTP —Å—Ç–∞—Ç—É—Å (404, 403, 200)  
‚úÖ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã  
‚úÖ –ù–∞–ª–∏—á–∏–µ header'–∞ –ø—Ä–æ—Ñ–∏–ª—è  
‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞  
‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã  
‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–∫—Å–∏

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–§—É–Ω–∫—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è:

1. **–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
   ```bash
   python test_proxy_header_screenshot.py
   ```

2. **–í —Å–≤–æ–µ–º –∫–æ–¥–µ:**
   ```python
   from project.services.main_checker import check_account_with_header_dark_theme
   ```

3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –±–æ—Ç–∞:**
   - –§—É–Ω–∫—Ü–∏—è —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `main_checker.py`
   - –ú–æ–∂–Ω–æ –ª–µ–≥–∫–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –±–æ—Ç–∞

## üìã –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- üéØ –¢–æ–ª—å–∫–æ header (–Ω–µ –≤–µ—Å—å –ø—Ä–æ—Ñ–∏–ª—å)
- üåô –ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω (—Ç–µ–º–Ω–∞—è —Ç–µ–º–∞)
- üöÄ –ë–µ–∑ IG —Å–µ—Å—Å–∏–∏ (—Ç–æ–ª—å–∫–æ proxy)
- üì¶ –ú–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
- ‚ö° –ë—ã—Å—Ç—Ä–µ–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–∫—Å–∏ –≤ –±–∞–∑–µ
- ‚úÖ Playwright —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ Python 3.8+

## üéâ –ì–æ—Ç–æ–≤–æ!

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
python test_proxy_header_screenshot.py
```

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Å–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö!

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–Ω–µ–¥—Ä–µ–Ω–æ  
**–î–∞—Ç–∞:** 22 –æ–∫—Ç—è–±—Ä—è 2025

