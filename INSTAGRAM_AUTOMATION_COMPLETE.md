# ‚úÖ Instagram –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è - –ó–ê–í–ï–†–®–ï–ù–û

## üéØ –¶–µ–ª—å
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –≤ Instagram —á–µ—Ä–µ–∑ —Å–∫—Ä–∞–ø–∏–Ω–≥ —Å –ø–æ–º–æ—â—å—é Playwright –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è cookies.

## üîß –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### 1. –£—Å–ø–µ—à–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **–§–∞–π–ª**: `project/services/ig_login.py`
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ**: –ê–∫–∫–∞—É–Ω—Ç `uk___pr` - —É—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥

### 2. –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞

#### üéØ –ù–∞–¥–µ–∂–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–æ–ª–µ–π
```python
# –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ input —ç–ª–µ–º–µ–Ω—Ç—ã
inputs = await page.query_selector_all("input")

# –ü–µ—Ä–≤—ã–π input - username, –≤—Ç–æ—Ä–æ–π - password  
username_input = inputs[0]
password_input = inputs[1]
```

#### ‚è≥ –¢–µ—Ä–ø–µ–ª–∏–≤–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ
```python
# –ñ–¥–µ–º —Å —Ç–µ—Ä–ø–µ–Ω–∏–µ–º –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
for i in range(10):  # –ñ–¥–µ–º –¥–æ 10 —Å–µ–∫—É–Ω–¥
    await page.wait_for_timeout(1000)
    current_url = page.url
    
    # –ï—Å–ª–∏ URL –∏–∑–º–µ–Ω–∏–ª—Å—è, –∑–Ω–∞—á–∏—Ç —á—Ç–æ-—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
    if "/accounts/login" not in current_url:
        print("‚úÖ URL changed - redirect happening")
        break
```

#### üç™ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ cookies
```python
# –ü–æ–ª—É—á–∞–µ–º cookies
cookies = await context.cookies()

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ sessionid
has_sessionid = any(c.get('name') == 'sessionid' for c in cookies)
```

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

#### ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥
- –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ `/accounts/onetap/`
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ cookies
- –í–∫–ª—é—á–∞—è `sessionid`, `csrftoken`, `ds_user_id`

#### ‚ùå –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **2FA**: –ß–µ—Ç–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è cookies
- **Security Challenge**: –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è —Ä—É—á–Ω–æ–≥–æ –≤—Ö–æ–¥–∞
- **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º

#### üì± Mini App (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±)
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `miniapp/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –ü–æ—à–∞–≥–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–µ–∑ iframe

#### üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π
- **–§—É–Ω–∫—Ü–∏—è**: `check_and_refresh_session` –≤ `ig_simple_checker.py`
- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—Ö–æ–¥ –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ cookies

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç: `uk___pr`
```
‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!
üç™ –ü–æ–ª—É—á–µ–Ω–æ 10 cookies
üç™ sessionid –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç: ‚úÖ

üìã –û—Å–Ω–æ–≤–Ω—ã–µ cookies:
  ‚Ä¢ csrftoken: PGhKTWdbcVFdyUFQtRaw...
  ‚Ä¢ ig_did: 2998CEC0-0402-4C9B-B...
  ‚Ä¢ mid: aOwCoQALAAH6I1vpRbMt...
  ‚Ä¢ sessionid: 77284452384%3Ave4Ag8...
  ‚Ä¢ ds_user_id: 77284452384...
```

### –ü—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
1. **–ù–∞–≤–∏–≥–∞—Ü–∏—è**: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞ ‚úÖ
2. **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–æ–ª–µ–π**: –ù–∞–π–¥–µ–Ω–æ 2 input —ç–ª–µ–º–µ–Ω—Ç–∞ ‚úÖ
3. **–í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö**: Username –∏ password –≤–≤–µ–¥–µ–Ω—ã ‚úÖ
4. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã**: –ö–Ω–æ–ø–∫–∞ –≤—Ö–æ–¥–∞ –Ω–∞–∂–∞—Ç–∞ ‚úÖ
5. **–û–∂–∏–¥–∞–Ω–∏–µ**: URL –∏–∑–º–µ–Ω–∏–ª—Å—è —Å `/accounts/login/` –Ω–∞ `/accounts/onetap/` ‚úÖ
6. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ cookies**: –ü–æ–ª—É—á–µ–Ω–æ 10 cookies —Å sessionid ‚úÖ

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã
- `project/services/ig_login.py` - –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `project/services/ig_simple_checker.py` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–µ—Å—Å–∏–π
- `project/services/ig_sessions.py` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Instagram —Å–µ—Å—Å–∏—è–º–∏

### Mini App (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±)
- `miniapp/instagram_login/views.py` - Django views
- `miniapp/instagram_login/templates/instagram_login/index.html` - HTML –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- `miniapp/start_miniapp.bat/.sh` - –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `project/config.py` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞
- `env.example` - –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** - –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞
2. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ cookies** - –ù–∞–¥–µ–∂–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ sessionid
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –ß–µ—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º** - –ì–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

### üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã
1. **Mini App** - –î–ª—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. **–†—É—á–Ω–æ–π –∏–º–ø–æ—Ä—Ç cookies** - –î–ª—è –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Å 2FA

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**: ~2 —á–∞—Å–∞
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π**: 5 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤
- **–£—Å–ø–µ—à–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤**: 100% —Å —Ç–µ—Å—Ç–æ–≤—ã–º –∞–∫–∫–∞—É–Ω—Ç–æ–º
- **–û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤**: 4 (—É—Å–ø–µ—Ö, 2FA, challenge, –æ—à–∏–±–∫–∞)

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ Instagram **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞**. –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è:**
- ‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å - —á–µ—Ç–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è - –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –±–æ—Ç–µ
- ‚úÖ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã - Mini App –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!** üöÄ
