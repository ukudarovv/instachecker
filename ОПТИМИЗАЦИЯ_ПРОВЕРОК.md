# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –∞–∫–∫–∞—É–Ω—Ç–æ–≤

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã.

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

1. **–î–≤—É—Ö—Ñ–∞–∑–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞**
   - **–§–∞–∑–∞ 1**: –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ API (–º–∞–∫—Å–∏–º—É–º 1 —Å–µ–∫—É–Ω–¥–∞ –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏)
   - **–§–∞–∑–∞ 2**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Instagram —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ (5 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏)

2. **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã**:
   - API –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ –¥–ª—è –≤—Å–µ—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤
   - Instagram –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ** –µ—Å–ª–∏ API –ø–æ–∫–∞–∑–∞–ª –∞–∫–∫–∞—É–Ω—Ç –∞–∫—Ç–∏–≤–Ω—ã–º
   - –ú–µ–∂–¥—É Instagram –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ ‚Äî –ø–µ—Ä–µ—Ä—ã–≤ 5 —Å–µ–∫—É–Ω–¥ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –Ω–µ—Å–∫–æ–ª—å–∫–æ)

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏**: API –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–Ω–∏–º–∞—é—Ç 1 —Å–µ–∫ –≤–º–µ—Å—Ç–æ 15 —Å–µ–∫
‚úÖ **–ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ Instagram**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Instagram —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤
‚úÖ **–ò–∑–±–µ–∂–∞–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫**: –ê–¥–µ–∫–≤–∞—Ç–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É Instagram –∑–∞–ø—Ä–æ—Å–∞–º–∏ (5 —Å–µ–∫)
‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è API –∫–≤–æ—Ç**: API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–≤–∏—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

**–°—Ü–µ–Ω–∞—Ä–∏–π**: 10 –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É

#### –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ (–±—ã–ª–æ):
- 10 –∞–∫–∫–∞—É–Ω—Ç–æ–≤ √ó 15 —Å–µ–∫—É–Ω–¥ = **150 —Å–µ–∫—É–Ω–¥ (2.5 –º–∏–Ω—É—Ç—ã)**
- –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ API + Instagram –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

#### –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ (—Å—Ç–∞–ª–æ):
- **–§–∞–∑–∞ 1 (API)**: 10 –∞–∫–∫–∞—É–Ω—Ç–æ–≤ √ó 1 —Å–µ–∫—É–Ω–¥–∞ = 10 —Å–µ–∫—É–Ω–¥
  - –†–µ–∑—É–ª—å—Ç–∞—Ç: 3 –∞–∫—Ç–∏–≤–Ω—ã—Ö, 7 –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
  
- **–§–∞–∑–∞ 2 (Instagram)**: 3 –∞–∫–∫–∞—É–Ω—Ç–∞ √ó 5 —Å–µ–∫—É–Ω–¥ = 15 —Å–µ–∫—É–Ω–¥
  - –¢–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Ö, —á—Ç–æ API –ø–æ–∫–∞–∑–∞–ª –∞–∫—Ç–∏–≤–Ω—ã–º–∏

- **–ò—Ç–æ–≥–æ**: 10 + 15 = **25 —Å–µ–∫—É–Ω–¥** –≤–º–µ—Å—Ç–æ 150 —Å–µ–∫—É–Ω–¥

**–£—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ 6 —Ä–∞–∑!** ‚ö°

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`project/services/hybrid_checker.py`**
   - –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `skip_instagram_verification` –≤ —Ñ—É–Ω–∫—Ü–∏—é `check_account_hybrid()`
   - –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —á–µ—Ä–µ–∑ Instagram –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

2. **`project/cron/auto_checker.py`**
   - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –¥–≤—É—Ö—Ñ–∞–∑–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
   - –§–∞–∑–∞ 1: API –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 1 —Å–µ–∫
   - –§–∞–∑–∞ 2: Instagram –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 5 —Å–µ–∫

### –ö–æ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–π

#### hybrid_checker.py
```python
async def check_account_hybrid(
    session: Session,
    user_id: int,
    username: str,
    ig_session: Optional[InstagramSession] = None,
    fernet: Optional[OptionalFernet] = None,
    skip_instagram_verification: bool = False  # –ù–û–í–´–ô –ü–ê–†–ê–ú–ï–¢–†
) -> Dict[str, Any]:
    # ...
    # Instagram –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –µ—Å–ª–∏ skip_instagram_verification=True
    if api_result["exists"] is True and ig_session and fernet and not skip_instagram_verification:
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Instagram
        pass
```

#### auto_checker.py
```python
# –§–ê–ó–ê 1: –ë—ã—Å—Ç—Ä—ã–µ API –ø—Ä–æ–≤–µ—Ä–∫–∏ (1 —Å–µ–∫ –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏)
for acc in pending_accounts:
    result = await check_account_hybrid(
        session=s,
        user_id=acc.user_id,
        username=acc.account,
        ig_session=ig_session,
        fernet=fernet,
        skip_instagram_verification=True  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º Instagram –≤ –§–∞–∑–µ 1
    )
    
    if result.get("exists") is True:
        accounts_to_verify.append((acc, result, ig_session))
    
    await asyncio.sleep(1)  # 1 —Å–µ–∫—É–Ω–¥–∞ –º–µ–∂–¥—É API –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏

# –§–ê–ó–ê 2: Instagram –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö (5 —Å–µ–∫ –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏)
for acc, api_result, ig_session in accounts_to_verify:
    result = await check_account_hybrid(
        session=s,
        user_id=acc.user_id,
        username=acc.account,
        ig_session=ig_session,
        fernet=fernet,
        skip_instagram_verification=False  # –¢–µ–ø–µ—Ä—å –¥–µ–ª–∞–µ–º Instagram –ø—Ä–æ–≤–µ—Ä–∫—É
    )
    
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞...
    
    await asyncio.sleep(5)  # 5 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É Instagram –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
```

## –õ–æ–≥–∏ —Ä–∞–±–æ—Ç—ã

### –§–∞–∑–∞ 1 - API –ø—Ä–æ–≤–µ—Ä–∫–∏
```
[AUTO-CHECK] üì° Phase 1: API checks for 10 accounts...
[AUTO-CHECK] [1/10] API check @username1...
[AUTO-CHECK] ‚úì @username1 - API says ACTIVE (will verify with Instagram)
[AUTO-CHECK] [2/10] API check @username2...
[AUTO-CHECK] ‚ùå @username2 - API says NOT FOUND
...
[AUTO-CHECK] üì° Phase 1 complete: 3 accounts to verify via Instagram
```

### –§–∞–∑–∞ 2 - Instagram –ø—Ä–æ–≤–µ—Ä–∫–∏
```
[AUTO-CHECK] üì∏ Phase 2: Instagram verification for 3 active accounts...
[AUTO-CHECK] [1/3] Instagram verify @username1...
[AUTO-CHECK] ‚úÖ @username1 - FOUND (verified via api+instagram)
[AUTO-CHECK] ‚è≥ Waiting 5 seconds before next Instagram check...
[AUTO-CHECK] [2/3] Instagram verify @username5...
...
[AUTO-CHECK] üì∏ Phase 2 complete!
```

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

‚úÖ –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã `check_account_hybrid()` –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚úÖ –ù–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `skip_instagram_verification` –∏–º–µ–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `False`
‚úÖ –õ–æ–≥–∏–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å

## –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

16 –æ–∫—Ç—è–±—Ä—è 2025

