# Настройки пользователя: Выбор режима проверки

## 🎯 Цель

Каждый пользователь может **самостоятельно** выбрать режим проверки аккаунтов через меню **"⚙️ Настройки"**.

## 📱 Как использовать

### 1. **Открыть настройки**

В главном меню нажмите кнопку:
```
⚙️ Настройки
```

### 2. **Выбрать "Режим проверки"**

В меню настроек нажмите:
```
🔄 Режим проверки
```

### 3. **Увидите текущий режим и описание**

```
🔄 Текущий режим проверки

🔑 API + 📸 Instagram (с логином)

Двухэтапная проверка:
1️⃣ Быстрая проверка через API (1 сек)
2️⃣ Проверка через Instagram с авторизацией (5 сек)

✅ Полная информация (подписчики, посты)
✅ Скриншоты профиля
✅ Доступ к приватным профилям
❗ Требуется Instagram сессия

Выберите новый режим проверки:

[✅ 🔑 API + 📸 Instagram (с логином)]  ← текущий
[🔑 API + 🌐 Proxy (без логина)]
[⬅️ Закрыть]
```

### 4. **Выбрать новый режим**

Нажмите на кнопку с желаемым режимом:
- **🔑 API + 📸 Instagram (с логином)** - для полной проверки
- **🔑 API + 🌐 Proxy (без логина)** - для простой проверки

### 5. **Получите подтверждение**

```
✅ Режим изменен на 🔑 API + 🌐 Proxy
```

Меню обновится, показывая новый выбранный режим с галочкой ✅.

---

## 🔄 Режимы проверки

### **Режим 1: API + Instagram** (`api+instagram`)

**Этапы проверки**:
1. API проверка (1 секунда) - быстрая проверка
2. Instagram с логином (5 секунд) - детальная проверка

**Что получаете**:
- ✅ Полная информация об аккаунте (подписчики, публикации)
- ✅ Скриншоты профиля
- ✅ Доступ к приватным профилям (если есть подписка)
- ✅ Точная проверка

**Что требуется**:
- ❗ Instagram сессия (добавьте через меню "Instagram")
- ❗ Валидные cookies

**Когда использовать**:
- У вас есть Instagram аккаунт
- Нужна полная информация
- Проверяете приватные профили

---

### **Режим 2: API + Proxy** (`api+proxy`)

**Этапы проверки**:
1. API проверка (1 секунда) - быстрая проверка
2. Proxy без логина (5 секунд) - публичная проверка

**Что получаете**:
- ✅ Проверка наличия аккаунта
- ✅ Скриншоты публичных страниц
- ✅ Определение приватности
- ✅ Минимальный риск блокировки

**Что требуется**:
- ❗ Активный Proxy (добавьте через меню "Прокси")

**Когда использовать**:
- Нет Instagram аккаунта
- Проверяете только публичные профили
- Хотите минимизировать риски

---

## 🔧 Техническая реализация

### **Файлы**:

1. **`project/keyboards.py`**
   - Добавлена кнопка "⚙️ Настройки" в главное меню
   - Функция `settings_menu_kb()` - меню настроек
   - Функция `verify_mode_selection_kb()` - выбор режима с галочкой

2. **`project/bot.py`**
   - Обработчик текста "⚙️ Настройки"
   - Обработчик текста "🔄 Режим проверки"
   - Обработчик текста "⬅️ Назад в меню"
   - Обработчик callback `set_verify_mode:{mode}`
   - Обработчик callback `close_settings`

### **Главное меню** (обновлено):

```
┌─────────────────────────────────────┐
│ Добавить аккаунт | Активные аккаунты │
│ Аккаунты на проверке | Проверить     │
│ API | Прокси | Instagram            │
│ ⚙️ Настройки                        │  ← НОВАЯ КНОПКА
│ [Админка] (только для админов)      │
└─────────────────────────────────────┘
```

### **Меню настроек**:

```
┌────────────────────┐
│ 🔄 Режим проверки  │
│ ⬅️ Назад в меню    │
└────────────────────┘
```

### **Меню выбора режима** (inline keyboard):

```
╔═══════════════════════════════════════════╗
║ ✅ 🔑 API + 📸 Instagram (с логином)      ║ ← Текущий режим
║ 🔑 API + 🌐 Proxy (без логина)            ║
║ ⬅️ Закрыть                                ║
╚═══════════════════════════════════════════╝
```

---

## 📋 Пошаговая инструкция для пользователя

### **Шаг 1**: Нажмите "⚙️ Настройки" в главном меню

### **Шаг 2**: Нажмите "🔄 Режим проверки"

### **Шаг 3**: Увидите описание текущего режима и кнопки для выбора

### **Шаг 4**: Выберите желаемый режим:
- Если у вас есть Instagram сессия → "API + Instagram"
- Если есть только Proxy → "API + Proxy"

### **Шаг 5**: Получите подтверждение "✅ Режим изменен"

### **Шаг 6**: Все новые проверки будут использовать выбранный режим

---

## 🎯 Преимущества

✅ **Самостоятельный выбор** - каждый выбирает удобный режим  
✅ **Простой интерфейс** - кнопки с описаниями  
✅ **Визуальная индикация** - галочка ✅ на текущем режиме  
✅ **Мгновенное применение** - следующая проверка использует новый режим  
✅ **Доступно всем** - не требует прав администратора  

---

## 🔐 Доступ

**Кто может изменять режим**:
- ✅ Все **активные пользователи**
- ✅ Каждый меняет **только свой** режим

**Кто НЕ может**:
- ❌ Неактивные пользователи (нет доступа к боту)

---

## 📝 Примечания

### **Для администраторов**:
- Администраторы могут менять режим **любого пользователя** через "Управление пользователями"
- Кнопка "🔄 Изменить режим проверки" в карточке пользователя

### **Для обычных пользователей**:
- Доступ через "⚙️ Настройки" → "🔄 Режим проверки"
- Можно менять **только свой** режим

---

## ✅ Итого

**Теперь каждый пользователь может:**
1. Открыть "⚙️ Настройки"
2. Выбрать "🔄 Режим проверки"
3. Переключиться между **API+Instagram** и **API+Proxy**
4. Увидеть описание каждого режима
5. Получить подтверждение изменения

**Полная свобода выбора для каждого пользователя!** 🚀

**Дата реализации**: 17 октября 2025

