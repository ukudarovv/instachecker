# ‚úÖ Header-—Å–∫—Ä–∏–Ω—à–æ—Ç—ã —Å —Ç–µ–º–Ω–æ–π —Ç–µ–º–æ–π —á–µ—Ä–µ–∑ Proxy

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ Instagram –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ **proxy –ë–ï–ó Instagram —Å–µ—Å—Å–∏–∏** —Å–æ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–º **—Ç–æ–ª—å–∫–æ header'–∞ –ø—Ä–æ—Ñ–∏–ª—è** —Å **—Ç–µ–º–Ω–æ–π —Ç–µ–º–æ–π** (—á–µ—Ä–Ω—ã–π —Ñ–æ–Ω, –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç).

## üì∏ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –°–∫—Ä–∏–Ω—à–æ—Ç header'–∞
- ‚úÖ –î–µ–ª–∞–µ—Ç—Å—è —Å–∫—Ä–∏–Ω—à–æ—Ç —Ç–æ–ª—å–∫–æ **header'–∞** –ø—Ä–æ—Ñ–∏–ª—è (–Ω–µ –≤–µ—Å—å –ø—Ä–æ—Ñ–∏–ª—å)
- ‚úÖ –ú–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

### –¢–µ–º–Ω–∞—è —Ç–µ–º–∞
- ‚úÖ **–ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω** (#000000)
- ‚úÖ **–ë–µ–ª—ã–π —Ç–µ–∫—Å—Ç** (#ffffff)
- ‚úÖ –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ CSS –∏ JavaScript
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –Ω–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ñ–∏–ª—è—Ö

### –ë–µ–∑ Instagram —Å–µ—Å—Å–∏–∏
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ª–æ–≥–∏–Ω –≤ Instagram
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ **proxy**
- ‚úÖ –ü—Ä–æ—â–µ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏

## üîß –§–∞–π–ª—ã

### 1. `project/services/ig_screenshot.py`
–î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `check_account_with_header_screenshot()`:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å —á–µ—Ä–µ–∑ proxy
- –î–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–Ω—à–æ—Ç —Ç–æ–ª—å–∫–æ header'–∞
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç —Ç–µ–º–Ω—É—é —Ç–µ–º—É

### 2. `project/services/main_checker.py`
–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `check_account_with_header_dark_theme()`:
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ—Å–Ω–æ–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ø—Ä–æ–≤–µ—Ä–æ–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ª—É—á—à–µ–≥–æ –ø—Ä–æ–∫—Å–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–∫—Å–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
–°–æ–∑–¥–∞–Ω `test_proxy_header_screenshot.py` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

```bash
python test_proxy_header_screenshot.py
```

–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç:
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ proxy
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ header'–∞
- ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã (—á–µ—Ä–Ω—ã–π —Ñ–æ–Ω)
- ‚úÖ –†–∞–∑–º–µ—Ä –∏ –∫–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

## üìù –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Python API

```python
from project.services.main_checker import check_account_with_header_dark_theme
from project.database import get_session_factory

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
session_factory = get_session_factory()

with session_factory() as session:
    success, message, screenshot_path = await check_account_with_header_dark_theme(
        username="instagram",
        session=session,
        user_id=1
    )
    
    print(f"–£—Å–ø–µ—Ö: {success}")
    print(f"–°–æ–æ–±—â–µ–Ω–∏–µ: {message}")
    print(f"–°–∫—Ä–∏–Ω—à–æ—Ç: {screenshot_path}")
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ù–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ ig_screenshot

```python
from project.services.ig_screenshot import check_account_with_header_screenshot

result = await check_account_with_header_screenshot(
    username="instagram",
    proxy_url="http://user:pass@proxy.example.com:8080",
    screenshot_path="screenshots/instagram_header.png",
    headless=True,
    timeout_ms=30000,
    dark_theme=True  # –ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω
)

print(result)
```

## üé® –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ (–ø–æ–ª–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å, —Å–≤–µ—Ç–ª—ã–π —Ñ–æ–Ω)
- –†–∞–∑–º–µ—Ä: ~360x900 px
- –¶–≤–µ—Ç —Ñ–æ–Ω–∞: –ë–µ–ª—ã–π
- –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ: –í–µ—Å—å –ø—Ä–æ—Ñ–∏–ª—å

### –ü–æ—Å–ª–µ (header, —Ç–µ–º–Ω—ã–π —Ñ–æ–Ω)
- –†–∞–∑–º–µ—Ä: ~360x200-300 px
- –¶–≤–µ—Ç —Ñ–æ–Ω–∞: **–ß–µ—Ä–Ω—ã–π**
- –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ: **–¢–æ–ª—å–∫–æ header**
- –¢–µ–∫—Å—Ç: **–ë–µ–ª—ã–π**

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ú–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞** - —Ç–æ–ª—å–∫–æ header –≤–º–µ—Å—Ç–æ –≤—Å–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
2. **–¢–µ–º–Ω–∞—è —Ç–µ–º–∞** - –ø—Ä–∏—è—Ç–Ω–µ–µ –¥–ª—è –≥–ª–∞–∑, –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–µ–µ
3. **–ë–µ–∑ IG —Å–µ—Å—Å–∏–∏** - –ø—Ä–æ—â–µ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ª–æ–≥–∏–Ω
4. **–ß–µ—Ä–µ–∑ proxy** - –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ IP
5. **–ë—ã—Å—Ç—Ä–µ–µ** - –º–µ–Ω—å—à–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üîç –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è

1. **–°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è** - –ø—Ä–æ–≤–µ—Ä–∫–∞ HTTP —Å—Ç–∞—Ç—É—Å–∞ (404, 403, 200)
2. **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–∞** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
3. **Header –ø—Ä–æ—Ñ–∏–ª—è** - –ø–æ–∏—Å–∫ —ç–ª–µ–º–µ–Ω—Ç–∞ header –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
4. **–°–∫—Ä–∏–Ω—à–æ—Ç** - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ —Å —Ç–µ–º–Ω–æ–π —Ç–µ–º–æ–π

## üöÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –±–æ—Ç–∞

–§—É–Ω–∫—Ü–∏—è —É–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ `main_checker.py` –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –±–æ—Ç–µ —á–µ—Ä–µ–∑:

```python
from project.services.main_checker import check_account_with_header_dark_theme
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- ‚úÖ Python 3.8+
- ‚úÖ Playwright —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–∫—Å–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ PIL (Pillow) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:
   ```bash
   python test_proxy_header_screenshot.py
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–Ω—à–æ—Ç –≤ –ø–∞–ø–∫–µ `screenshots/`:
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ header –ø—Ä–æ—Ñ–∏–ª—è
   - –§–æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–µ—Ä–Ω—ã–π
   - –¢–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–µ–ª—ã–π

3. –ï—Å–ª–∏ –≤—Å–µ –û–ö - —Ñ—É–Ω–∫—Ü–∏—è –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
**–î–∞—Ç–∞:** 22 –æ–∫—Ç—è–±—Ä—è 2025

