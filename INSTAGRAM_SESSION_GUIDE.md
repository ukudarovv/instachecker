# üì± Instagram Session Guide

## –û–±–∑–æ—Ä

–≠—Ç–∞–ø 4-Instagram –¥–æ–±–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ **–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ Instagram-—Å–µ—Å—Å–∏–∏**. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏, —Ç–∞–∫ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ cookies –æ—Ç –≤—Ö–æ–¥–∞ –≤ Instagram.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **–ò–º–ø–æ—Ä—Ç cookies** –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±)
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** (cookies)
- **–•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤** —á–µ—Ä–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- **–ü–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ—Ñ–∏–ª–µ–π** —Å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º –º–µ—Ç—Ä–∏–∫ (followers, following, posts)
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–∫—Å–∏** –¥–ª—è —Å–µ—Å—Å–∏–π
- **FSM –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–π

### üîÑ –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- **–õ–æ–≥–∏–Ω —á–µ—Ä–µ–∑ Playwright** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥)
- **2FA –ø–æ–¥–¥–µ—Ä–∂–∫–∞** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ª–æ–≥–∏–Ω–∞
- **–°–∫—Ä–∏–Ω—à–æ—Ç—ã –ø—Ä–æ—Ñ–∏–ª–µ–π** —á–µ—Ä–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏

## üìã –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```bash
# –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ (32-–±–∞–π—Ç Base64 urlsafe –∫–ª—é—á)
ENCRYPTION_KEY=your_32_byte_base64_key_here

# Instagram –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
IG_HEADLESS=true
IG_LOGIN_TIMEOUT=25000
IG_2FA_TIMEOUT=300000

# –°–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤
IG_SCREENSHOT_HEADER_SELECTOR=header
IG_SCREENSHOT_FALLBACK_SELECTOR=main
```

### 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

```python
from cryptography.fernet import Fernet
key = Fernet.generate_key()
print(key.decode())  # –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤ ENCRYPTION_KEY
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install cryptography==43.0.1
```

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Instagram-—Å–µ—Å—Å–∏–∏

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –º–µ–Ω—é "Instagram"** –≤ –±–æ—Ç–µ
2. **–ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å IG-—Å–µ—Å—Å–∏—é"**
3. **–í—ã–±–µ—Ä–∏—Ç–µ "–ò–º–ø–æ—Ä—Ç cookies"** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
4. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ cookies** –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞:
   - –û—Ç–∫—Ä–æ–π—Ç–µ Instagram –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç
   - –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Application ‚Üí Cookies ‚Üí https://instagram.com
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å–µ cookies –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
5. **–í—Å—Ç–∞–≤—å—Ç–µ JSON** –≤ –±–æ—Ç
6. **–£–∫–∞–∂–∏—Ç–µ IG username** –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ —Å–µ—Å—Å–∏–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤

1. **–î–æ–±–∞–≤—å—Ç–µ –∞–∫–∫–∞—É–Ω—Ç—ã** —á–µ—Ä–µ–∑ –º–µ–Ω—é "–ê–∫–∫–∞—É–Ω—Ç—ã"
2. **–û—Ç–∫—Ä–æ–π—Ç–µ "Instagram" ‚Üí "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ IG"**
3. **–ë–æ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç** –≤—Å–µ –∞–∫–∫–∞—É–Ω—Ç—ã –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ —á–µ—Ä–µ–∑ –≤–∞—à—É —Å–µ—Å—Å–∏—é
4. **–ü–æ–ª—É—á–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –ø—Ä–æ—Ñ–∏–ª–µ–π

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

```python
class InstagramSession(Base):
    id = Column(Integer, primary_key=True)
    user_id = Column(Integer, ForeignKey("users.id"))
    username = Column(String)  # IG username
    cookies = Column(Text)    # –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ cookies
    is_active = Column(Boolean, default=True)
    created_at = Column(DateTime)
    last_used = Column(DateTime)
    expires_at = Column(DateTime)
    proxy_id = Column(Integer, ForeignKey("proxies.id"))
```

### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ

- **Cookies —à–∏—Ñ—Ä—É—é—Ç—Å—è** —Å –ø–æ–º–æ—â—å—é Fernet
- **–ö–ª—é—á –±–µ—Ä–µ—Ç—Å—è** –∏–∑ `ENCRYPTION_KEY`
- **–ë–µ–∑ –∫–ª—é—á–∞** cookies —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### FSM –°–æ—Å—Ç–æ—è–Ω–∏—è

```python
class IGAddSessionStates(StatesGroup):
    choose_mode = State()          # –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞
    waiting_cookies = State()       # –û–∂–∏–¥–∞–Ω–∏–µ cookies
    waiting_username = State()      # –û–∂–∏–¥–∞–Ω–∏–µ username
    waiting_password = State()      # –û–∂–∏–¥–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è
    waiting_2fa_code = State()      # –û–∂–∏–¥–∞–Ω–∏–µ 2FA –∫–æ–¥–∞
    choose_proxy = State()          # –í—ã–±–æ—Ä –ø—Ä–æ–∫—Å–∏
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–º–ø–æ—Ä—Ç cookies** –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—á–∏ –ø–∞—Ä–æ–ª–µ–π
2. **–•—Ä–∞–Ω–∏—Ç–µ –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è** –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
3. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ** —Å–µ—Å—Å–∏–∏ (cookies –∏—Å—Ç–µ–∫–∞—é—Ç)
4. **–ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –ø–∞—Ä–æ–ª–∏** —á–µ—Ä–µ–∑ Telegram

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **Cookies –∏—Å—Ç–µ–∫–∞—é—Ç** (–æ–±—ã—á–Ω–æ 30 –¥–Ω–µ–π)
- **Instagram –º–æ–∂–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å** –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
- **–°–æ–±–ª—é–¥–∞–π—Ç–µ ToS** Instagram
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∞–∫–∫–∞—É–Ω—Ç—ã**

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–π

```python
# –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
SELECT * FROM instagram_sessions WHERE user_id = YOUR_USER_ID;
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
python test_instagram_session.py
```

### –õ–æ–≥–∏

–ë–æ—Ç –≤—ã–≤–æ–¥–∏—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ:
- –ü—Ä–æ—Ü–µ—Å—Å–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- –û—à–∏–±–∫–∞—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –†–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–∞—Ä—Å–∏–Ω–≥–∞

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

```
@username
–ò–º—è: Full Name
–ü–æ–¥–ø–∏—Å—á–∏–∫–∏: 1234
–ü–æ–¥–ø–∏—Å–∫–∏: 567
–ü–æ—Å—Ç—ã: 89
–°—Ç–∞—Ç—É—Å: ‚úÖ –Ω–∞–π–¥–µ–Ω
```

### –°—Ç–∞—Ç—É—Å—ã

- **‚úÖ –Ω–∞–π–¥–µ–Ω** - –ø—Ä–æ—Ñ–∏–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –¥–∞–Ω–Ω—ã–µ –∏–∑–≤–ª–µ—á–µ–Ω—ã
- **‚ùå –Ω–µ –Ω–∞–π–¥–µ–Ω** - –ø—Ä–æ—Ñ–∏–ª—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (404)
- **‚ùì –Ω–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å** - –æ—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–î–æ–±–∞–≤—å—Ç–µ —Å–µ—Å—Å–∏—é** —á–µ—Ä–µ–∑ –∏–º–ø–æ—Ä—Ç cookies
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ** –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–∞—Ö
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** —Å–µ—Å—Å–∏–π
4. **–î–æ–±–∞–≤—å—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Å—Å–∏–π

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

- **–≠—Ç–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ
- **–°–æ–±–ª—é–¥–∞–π—Ç–µ –ª–∏–º–∏—Ç—ã** Instagram API
- **–ù–µ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª—è–π—Ç–µ** –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π
- **–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ** —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–π

---

**–ì–æ—Ç–æ–≤–æ!** üéâ –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∞–∫–∫–∞—É–Ω—Ç—ã —á–µ—Ä–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ Instagram-—Å–µ—Å—Å–∏–∏ —Å –≤—ã—Å–æ–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é!
