# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø: Header-—Å–∫—Ä–∏–Ω—à–æ—Ç—ã —Å —Ç–µ–º–Ω–æ–π —Ç–µ–º–æ–π

## ‚ùå –ü—Ä–æ–±–ª–µ–º—ã –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏

1. **–¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞** - —Ñ–æ–Ω –æ—Å—Ç–∞–≤–∞–ª—Å—è –±–µ–ª—ã–º
2. **–°–∫—Ä–∏–Ω—à–æ—Ç –Ω–µ –æ–±—Ä–µ–∑–∞–ª—Å—è** - –ø–æ–∫–∞–∑—ã–≤–∞–ª –≤–µ—Å—å –ø—Ä–æ—Ñ–∏–ª—å –≤–º–µ—Å—Ç–æ header'–∞

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞

**–§–∞–π–ª:** `project/services/ig_screenshot.py`

**–ë—ã–ª–æ:**
```css
/* –°–ª–∞–±–∞—è —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞ */
body, html {
    background-color: #000000 !important;
}
```

**–°—Ç–∞–ª–æ:**
```css
/* –ê–ì–†–ï–°–°–ò–í–ù–ê–Ø —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞ */
body, html, * {
    background-color: #000000 !important;
    color: #ffffff !important;
}

/* Instagram —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã */
[data-testid], [role="main"], [role="banner"] {
    background-color: #000000 !important;
}

/* –£–±–∏—Ä–∞–µ–º –≤—Å–µ –±–µ–ª—ã–µ —Ñ–æ–Ω—ã */
[class*="white"], [class*="light"], [class*="bg-"] {
    background-color: #000000 !important;
}
```

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:**
- ‚úÖ –ë–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π (2000ms + 1000ms)
- ‚úÖ –ë–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π JavaScript
- ‚úÖ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–µ–∑–∫–∞

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```python
# –û–ë–†–ï–ó–ö–ê: –ï—Å–ª–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç –ø–æ–ª—É—á–∏–ª—Å—è —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–º, –æ–±—Ä–µ–∑–∞–µ–º –µ–≥–æ
if os.path.exists(screenshot_path):
    from PIL import Image
    
    img = Image.open(screenshot_path)
    width, height = img.size
    
    # –û–±—Ä–µ–∑–∞–µ–º –¥–æ 25% –≤–µ—Ä—Ö–∞ (—Ç–æ–ª—å–∫–æ header)
    crop_ratio = 0.25
    new_height = int(height * crop_ratio)
    
    cropped = img.crop((0, 0, width, new_height))
    cropped.save(screenshot_path)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–µ–∑–∞–µ—Ç –¥–æ 25% –≤–µ—Ä—Ö–∞
- ‚úÖ –û—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ header –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ –£–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É–ª—É—á—à–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç:

```bash
python test_header_dark_fixed.py
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ proxy
- ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ header'–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–µ–∑–∫–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–≤–µ—Ç–∞ —Ñ–æ–Ω–∞ –≤ 5 —Ç–æ—á–∫–∞—Ö
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

**–°–∫—Ä–∏–Ω—à–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:**
- üìè –†–∞–∑–º–µ—Ä: ~360x200-300 px (—Ç–æ–ª—å–∫–æ header)
- üé® –§–æ–Ω: –ß–µ—Ä–Ω—ã–π –≤ >60% –ø–∏–∫—Å–µ–ª–µ–π
- üìù –¢–µ–∫—Å—Ç: –ë–µ–ª—ã–π
- üì¶ –§–∞–π–ª: ~50-100 KB

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –ë—ã–ª–æ | –°—Ç–∞–ª–æ |
|----------------|------|-------|
| –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ | ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–ª–∞ | ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç** |
| –û–±—Ä–µ–∑–∫–∞ | ‚ùå –ù–µ –±—ã–ª–æ | ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è** |
| –†–∞–∑–º–µ—Ä | ~900px –≤—ã—Å–æ—Ç–∞ | **~200-300px** |
| –§–æ–Ω | –ë–µ–ª—ã–π | **–ß–µ—Ä–Ω—ã–π** |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ | –ë–∞–∑–æ–≤–∞—è | **–î–µ—Ç–∞–ª—å–Ω–∞—è (5 —Ç–æ—á–µ–∫)** |

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞:

1. **CSS —Å–µ–ª–µ–∫—Ç–æ—Ä—ã:**
   - `*` - –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã
   - `[data-testid]` - Instagram —ç–ª–µ–º–µ–Ω—Ç—ã
   - `[class*="white"]` - –±–µ–ª—ã–µ –∫–ª–∞—Å—Å—ã
   - `[role="main"]` - –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

2. **JavaScript:**
   - –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º —ç–ª–µ–º–µ–Ω—Ç–∞–º
   - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞

3. **–í—Ä–µ–º—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:**
   - 2000ms –æ–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
   - 1000ms –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∏–ª–µ–π

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–µ–∑–∫–∞:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞:**
   - –ï—Å–ª–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç >400px –≤—ã—Å–æ—Ç–∞
   - –û–±—Ä–µ–∑–∞–µ—Ç –¥–æ 25% –≤–µ—Ä—Ö–∞

2. **PIL –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
   - –í—ã—á–∏—Å–ª—è–µ—Ç –Ω–æ–≤—É—é –≤—ã—Å–æ—Ç—É
   - –û–±—Ä–µ–∑–∞–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

```python
from project.services.ig_screenshot import check_account_with_header_screenshot

result = await check_account_with_header_screenshot(
    username="instagram",
    proxy_url="http://proxy:8080",
    screenshot_path="screenshots/test.png",
    dark_theme=True  # –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ!
)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω
- ‚úÖ –¢–æ–ª—å–∫–æ header
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–µ–∑–∫–∞
- ‚úÖ –ú–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞

---

## ‚úÖ –°—Ç–∞—Ç—É—Å

**–ò–°–ü–†–ê–í–õ–ï–ù–û!** 

- ‚úÖ –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–µ–∑–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–æ
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

**–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```bash
python test_header_dark_fixed.py
```

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:** 22 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ
